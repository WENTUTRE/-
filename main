#include <iostream>
#include <vector>
#include <ctime>
#include <string> 
#include "player.h"
using namespace std;

int num = 0;

void drawcard(vector<int> &deck)
{
	srand((unsigned)time(NULL));
	for (int i = 0; i < 52; i++)
	{
		int k = rand() % 52;
		int temp = deck[i];
		deck[i] = deck[k];
		deck[k] = temp;
	}
	
}

int Card(vector<int> &deck)
{
	int a = deck[num];
	num++;
	return a;
}

int main()
{
	vector<int> deck(52);

	for (int i = 0; i < 52; i++)
		deck[i] = i;

	drawcard(deck);
	

	player p1("莊家");
	player p2("Alice");


	for (int i = 0; i < 5; i++)
	{
		p1.setCard(Card(deck));
		p1.getPoint();

		if (p2.action())
		{
			p2.setCard(Card(deck));
			p2.display();
		}
		else continue;

		if (p2.overflow())
		{
			cout << p2.getName() << " lose." << endl;
			break;
		}

		if (p1.overflow())
		{
			cout << p1.getName() << " lose." << endl;
			p1.display();
			break;
		}

		
	}

	system("pause");
	return 0;
}
